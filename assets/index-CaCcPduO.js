(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function _(e,t,r){return axios.get("https://api.open-meteo.com/v1/forecast?hourly=temperature_2m,apparent_temperature,precipitation,weathercode,windspeed_10m&daily=weathercode,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,precipitation_sum&current_weather=true&temperature_unit=fahrenheit&windspeed_unit=mph&precipitation_unit=inch&timeformat=unixtime",{params:{latitude:e,longitude:t,timezone:r}}).then(({data:o})=>({current:w(o),daily:y(o),hourly:T(o)}))}function w({current_weather:e,daily:t}){const{temperature:r,windspeed:o,Weathercode:n}=e;console.log(t);const{temperature_2m_max:[i],temperature_2m_min:[p],apparent_temperature_max:[h],apparent_temperature_min:[f],precipitation_sum:[g]}=t;return{currentTemp:Math.round(r),highTemp:Math.round(i),lowTemp:Math.round(p),highFeelslike:Math.round(h),lowFeelslike:Math.round(f),windspeed:Math.round(o),precip:Math.round(g*100)/100,iconCode:n}}function y({daily:e}){return e.time.map((t,r)=>({timestamp:t*1e3,iconCode:e.weathercode[r],maxTemp:Math.round(e.temperature_2m_max[r])}))}function T({hourly:e,current_weather:t}){return e.time.map((r,o)=>({timestamp:r*1e3,iconCode:e.weathercode[o],temp:Math.round(e.temperature_2m[o]),feelsLike:Math.round(e.apparent_temperature[o]),windSpeed:Math.round(e.windspeed_10m[o]),precip:Math.round(e.precipitation[o]*100)/100})).filter(({timestamp:r})=>r>=t.time*1e3)}const d=new Map;c([0,1],"sun");c([2],"cloud-sun");c([3],"cloud");c([45,48],"smog");c([51,53,55,56,57,61,63,65,66,67,80,81,82],"cloud-showers-heavy");c([71,73,75,77,85,86],"snowflake");c([95,96,99],"cloud-bolt");function c(e,t){e.forEach(r=>{d.set(r,t)})}navigator.geolocation.getCurrentPosition(M,S);function M({coords:e}){_(e.latitude,e.longitude,Intl.DateTimeFormat().resolvedOptions().timeZone).then(C).catch(t=>{console.error(t),alert("Error Getting Weather")})}function S(){alert("There was an error getting your location. Please allow us to use your location and refresh the page.")}function C(e){const{current:t,daily:r,hourly:o}=e;L(t),W(r),v(o),document.body.classList.remove("blurred")}function a(e,t,{parent:r=document}={}){r.querySelector(`[data-${e}]`).textContent=t}function u(e){return`./icon/${d.get(e)}.svg`}const F=document.querySelector("[data-current-icon]");function L(e){console.log(e),F.src=u(e.iconCode),a("current-temp",e.currentTemp),a("current-high",e.highTemp),a("current-low",e.lowTemp),a("current-fl-high",e.highFeelslike),a("current-fl-low",e.lowFeelslike),a("current-wind",e.windspeed),a("current-precip",e.precip)}const l=new Intl.DateTimeFormat(void 0,{weekday:"long"}),m=document.querySelector("[data-day-section]"),O=document.getElementById("day-card-template");function W(e){m.innerHTML="",e.forEach(t=>{const r=O.content.cloneNode(!0);a("temp",t.maxTemp,{parent:r}),a("date",l.format(t.timestamp),{parent:r}),r.querySelector("[data-icon]").src=u(t.iconCode),m.append(r)})}const E=new Intl.DateTimeFormat(void 0,{hour:"numeric"}),s=document.querySelector("[data-hour-section]"),I=document.getElementById("hour-row-template");function v(e){s.innerHTML="",e.forEach(t=>{const r=I.content.cloneNode(!0);a("temp",t.temp,{parent:r}),a("fl-temp",t.feelsLike,{parent:r}),a("wind",t.windSpeed,{parent:r}),a("precip",t.precip,{parent:r}),a("day",l.format(t.timestamp),{parent:r}),a("time",E.format(t.timestamp),{parent:r}),r.querySelector("[data-icon]").src=u(t.iconCode),s.append(r)})}
